(this["webpackJsonpreact-pipes"]=this["webpackJsonpreact-pipes"]||[]).push([[0],{1:function(e,t,n){e.exports={pipesB:"Pipes_pipesB__3v8eb",pipesContainerView:"Pipes_pipesContainerView__3s_K5",pipesCanvasB:"Pipes_pipesCanvasB__3RU1u",pipesLine:"Pipes_pipesLine__iK0cd",partPipes:"Pipes_partPipes__1k2a1",level1:"Pipes_level1__2sOnC",level2:"Pipes_level2__XIvkl",level3:"Pipes_level3__1Xz_q",level4:"Pipes_level4__2hBNj",pipesControlB:"Pipes_pipesControlB__bP4Yj",pipesControlLvl:"Pipes_pipesControlLvl__1sLkO",pipesControlScore:"Pipes_pipesControlScore__1j0PC",pipesControlHelp:"Pipes_pipesControlHelp__19wFK",pipesVerifyGame:"Pipes_pipesVerifyGame__1KeGA",pipesStartGame:"Pipes_pipesStartGame__2gIdj"}},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var i,s=n(2),a=n.n(s),c=n(5),l=n.n(c),p=(n(14),n(6)),o=n(7),r=n(3),d=n(9),u=n(8),h=n(1),v=n.n(h),j=n(0),m=function(e){return Object(j.jsx)("span",{className:v.a.partPipes,rotate:e.deg,onClick:function(t){e.onPipeClick(t,e.id,e.deg),e.handleToUpdate(t)},children:e.item[0]})},f=function(e){return Object(j.jsx)("div",{className:v.a.pipesLine,children:e.pipes.map((function(t,n){return Object(j.jsx)(m,{x:t[1],y:t[2],deg:t[3],id:t[5],item:t,handleToUpdate:e.handleToUpdate,onPipeClick:e.onPipeClick},n)}))})},_=new WebSocket("wss://hometask.eg1236.com/game-pipes/"),b=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).initMap=function(t){if("map: Not started"!==t){var n=[],i=t.split(/\n/g),s=0,a=0,c=0,l=-1;i.forEach((function(e,t){var i=t-1;if("map:"!==e&&""!==e){++s;for(var p=0;p<e.length;p++)a=p,c=i,l++,n.push([e[p],a,c,0,s,l])}})),e.setState((function(e){return{pipes:e.pipes.concat(n),countLine:e.countLine=s}}),(function(){}))}},e.onClickPartPipesHandler=function(t,n,i){e.setState({score:e.state.score+1});var s=[e.state.pipes[n][1],e.state.pipes[n][2]],a=i;270===a?a=0:a+=90,_.send("rotate ".concat(s.join(" "))),e.setState((function(e){e.pipes[n][3]=a}))},e.onChangeLevelHandle=function(t){if(0!==e.state.score){if(!window.confirm("Are you sure you want to complete the current progress?"))return!1;e.setState({initGame:0,level:t.target.value,score:0,pipes:[]})}else e.setState({initGame:0,level:t.target.value})},e.onInitGameHandle=function(t){e.setState({pipes:[],initGame:1},(function(){_.send("new ".concat(this.state.level)),_.send("map"),i="1"===this.state.level?v.a.level1:"2"===this.state.level?v.a.level2:"3"===this.state.level?v.a.level3:v.a.level4}))},e.onVerifyGameHandle=function(t){1===e.state.initGame&&_.send("verify")},e.handleToUpdate=function(){e.forceUpdate()},e.chunkLine=function(e,t){for(var n=[],i=0,s=e.length;i<s;)n.push(e.slice(i,i+=t));return n},e.state={initGame:0,pipes:[],countLine:0,level:0,score:0},e.onClickPartPipesHandler=e.onClickPartPipesHandler.bind(Object(r.a)(e)),e}return Object(o.a)(n,[{key:"messageGetServer",value:function(){var e=this;_.onmessage=function(t){switch(t.data.replace(/[\n\r]/g,"").split("")[0]){case"h":case"n":return console.log(t.data);case"m":return e.initMap(t.data);case"r":return console.log(t.data);case"v":return alert(t.data);default:return console.log("Unknown command")}}}},{key:"componentDidMount",value:function(){this.messageGetServer()}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:v.a.pipesB,children:[Object(j.jsxs)("div",{className:v.a.pipesControlB,children:[Object(j.jsxs)("div",{className:v.a.pipesControlLvl,children:[Object(j.jsx)("span",{children:"Level Game: "}),Object(j.jsxs)("select",{name:"levelGame",value:this.state.level,onChange:this.onChangeLevelHandle,children:[Object(j.jsx)("option",{value:"0",disabled:!0,children:"?"}),Object(j.jsx)("option",{value:"1",children:"1"}),Object(j.jsx)("option",{value:"2",children:"2"}),Object(j.jsx)("option",{value:"3",children:"3"}),Object(j.jsx)("option",{value:"4",children:"4"}),Object(j.jsx)("option",{value:"5",children:"5"}),Object(j.jsx)("option",{value:"6",children:"6"})]})]}),Object(j.jsxs)("div",{className:v.a.pipesControlScore,children:["Score: ",Object(j.jsx)("span",{children:this.state.score})]}),Object(j.jsx)("div",{className:v.a.pipesControlHelp,children:Object(j.jsx)("span",{children:"?"})})]}),Object(j.jsx)("div",{className:v.a.pipesContainerView,children:Object(j.jsx)("div",{className:"".concat(v.a.pipesCanvasB," ").concat(i),children:this.chunkLine(this.state.pipes,this.state.countLine).map((function(t,n){return Object(j.jsx)(f,{pipesLine:e.state.countLine,pipes:t,handleToUpdate:e.handleToUpdate,onPipeClick:e.onClickPartPipesHandler},n)}))})}),Object(j.jsxs)("div",{className:v.a.pipesControlB,children:[0!==this.state.level&&0===this.state.initGame&&Object(j.jsx)("button",{className:v.a.pipesStartGame,onClick:this.onInitGameHandle,children:"Start Game"}),1===this.state.initGame&&0!==this.state.score&&Object(j.jsx)("button",{className:v.a.pipesVerifyGame,onClick:this.onVerifyGameHandle,children:"Verify Game"})]})]})}}]),n}(a.a.Component);var C=function(){return Object(j.jsx)(b,{})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,i=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),s(e),a(e),c(e)}))};l.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(C,{})}),document.getElementById("root")),O()}},[[16,1,2]]]);
//# sourceMappingURL=main.34ac6c48.chunk.js.map